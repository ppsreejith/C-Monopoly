define(['jquery','lodash','backbone','models/round'],function($,_,Backbone, Round){

var tableView = Backbone.View.extend({
    el:'div.homeTable',
    userPosition:1,
    defaults:{
	position:1,
    }
    template:_.template($("#tableTemplate").html()),
    initialize:function(){
	var that = this;
	this.tableCollection =new Round.Tables(),
	this.tableCollection.fetch({success:function(){
	    that.render();
	}});
    }
    render:function(){
	var currentTables = this.tableCollection.where({userPos:this.position})
	var html = "";
	var obj = {};
	for(table in currentTables){
	    if(table.position == table.userPos)
		obj["yourCoins"] = table.amount;
	    else
		obj["p"+table.position] = table.amount;
	}
	this.$el.html(this.template(obj));
    }
});

return TableView;

});
